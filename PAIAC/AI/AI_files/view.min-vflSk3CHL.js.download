define(["require","exports","tslib","classnames","react","modules/core/i18n","modules/clean/auth/common/inputs/checkbox","modules/clean/auth/common/inputs/text","modules/clean/auth/common/recaptcha","modules/clean/auth/common/types","modules/clean/auth/register/google_register_button","modules/clean/auth/register/name_fields","modules/clean/react_format","modules/clean/react/file_viewer/conversions/conversion_utils"],(function(e,t,a,r,o,s,n,i,l,p,m,u,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=a.__importDefault(r);var h=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setCaptchaComponent=function(e){t.captchaComponent=e},t}return a.__extends(t,e),t.prototype.handleRecaptchaErrors=function(e){return l.handle_recaptcha_errors(this.captchaComponent,e)},t.prototype.getRecaptchaComponent=function(){return this.captchaComponent},t.prototype.getRecaptchaResponses=function(){return l.get_recaptcha_responses(this.captchaComponent)},t.prototype.render=function(){var e=this.props,t=e.className,a=e.variant,h=e.thirdPartyInitiatedSignup,f=e.tosCheckboxProps,g=e.onGoogleRegisterClick,b=e.disabled,_=e.isSubmitting,S=e.maestroStyle,v=e.onInputChange,E=e.showMarketingOptIn,C=e.marketingOptInChecked,y=r.default("form_shown","login-form-container","register",t,a,{third_party_auth:h}),P=f||{},k=void 0;P.unsafeLabelHTML||(k=c.reactFormat(s._("I agree to the <a>Dropbox Terms</a>"),{a:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.default.createElement("a",{href:"/terms",target:"_blank",rel:"noreferrer noopener"},e)}}));var N=this.props.submitButtonProps||{},x=r.default("login-button","button-primary",N.className,{"button-small":N.variant===p.AuthButtonVariant.SMALL,"button-big":N.variant===p.AuthButtonVariant.BIG}),R=this.props.thirdPartyInitiatedSignup,w=!!this.props.googleRegisterProps&&!R,I=this.props.googleRegisterProps||{},T=o.default.createElement(m.GoogleRegisterButton,{onClick:g,disabled:b||_,variant:I.variant,buttonProps:I.buttonProps}),M=o.default.createElement("div",{className:"hr-label"},o.default.createElement("span",{className:"hr-label__text"},s._("or"))),A=this.props.emailProps||{},V=r.default("input-email","text-input__margin-right",A.className),L=this.props.passwordProps||{},O=r.default("input-password",L.className),B=this.props.maestroStyle;"TOP"===I.position?B=!0:"BOTTOM"===I.position&&(B=!1);var F=P.variant||a,D=void 0===P.inline||P.inline,G=R?s._("Create and continue"):N.text||s._("Create an account");return o.default.createElement("div",{className:y},o.default.createElement("form",{className:"clearfix credentials-form register-form",onSubmit:this.props.onClickSignUp,method:"post"},B&&w&&T,B&&w&&M,o.default.createElement("div",{className:"credentials-form__fields"},o.default.createElement(u.RegisterFormNameFields,{maestroStyle:S,onInputChange:v,combinedName:this.props.combinedName,fnameError:this.props.fnameError,fnameProps:this.props.fnameProps,lnameProps:this.props.lnameProps,fnameValue:this.props.fnameValue,lnameValue:this.props.lnameValue,disabled:b,variant:a}),o.default.createElement("div",{className:"register-form__credential-fields"},o.default.createElement(i.AuthTextField,{value:this.props.emailValue,className:V,onChange:v,disabled:b||A.readonly||!1,label:A.label||(S?s._("Email"):void 0),placeholder:A.placeholder||(this.props.maestroStyle?s._("you@mail.com"):s._("Email")),error:this.props.emailError,maestroStyle:S,name:"email",type:p.AuthTextInputType.EMAIL,variant:a}),!this.props.thirdPartyInitiatedSignup&&o.default.createElement(i.AuthTextField,{value:this.props.passwordValue,placeholder:L.placeholder||(this.props.maestroStyle?s._("Minimum 6 characters"):s._("Password")),name:"password",className:O,inputClassName:"password-input",onChange:v,measureStrength:L.measureStrength,label:L.label||(S?s._("Password"):void 0),error:this.props.passwordError,maestroStyle:S,disabled:b,variant:a,passwordStrengthProps:L.strengthMeterProps,type:p.AuthTextInputType.PASSWORD}))),!d.shouldShowSimplifiedModal()&&o.default.createElement(l.Recaptcha,{ref:this.setCaptchaComponent,email:this.props.emailValue,onSubmit:this.props.onSubmit,source:"REGISTER"}),o.default.createElement(n.AuthCheckbox,{variant:F,className:"agree",disabled:P.disabled||b,maestroStyle:S,error:this.props.tosError,inline:D,onChange:v,name:"tos_agree",checked:this.props.tosChecked,label:P.label||k,unsafeLabelHTML:P.unsafeLabelHTML}),E&&o.default.createElement(n.AuthCheckbox,{variant:F,className:"agree marketing-opt-in-checkbox",disabled:b,maestroStyle:S,inline:D,onChange:v,checked:C,name:"marketing_opt_in",label:s._("Iâ€™d like to receive direct marketing email updates from Dropbox")}),o.default.createElement("button",{className:x,type:"submit",disabled:this.props.disabled||N.disabled||this.props.isSubmitting},o.default.createElement("span",null,G)),!B&&w&&!d.shouldShowSimplifiedModal()&&M,!B&&w&&T,d.shouldShowSimplifiedModal()&&o.default.createElement(l.Recaptcha,{ref:this.setCaptchaComponent,email:this.props.emailValue,onSubmit:this.props.onSubmit,source:"REGISTER"})))},t})((o=a.__importDefault(o)).default.Component);t.RegisterFormView=h}));
//# sourceMappingURL=view.min.js-vflnR4XhX.map